Инструкция FROM
В инструкции FROM определяется базовый слой для нового образа. Базовым слоем служит готовый образ — как правило, его загружают с Docker Hub.

FROM <image>:<tag>
# <image> — имя базового образа, например, python.
# <tag> — необязательный параметр, указывает конкретную версию образа.
 

 Инструкция WORKDIR
В образе выстраивается собственная структура директорий и файлов; при сборке образа требуется выполнять операции в разных директориях. 
Инструкция WORKDIR позволяет переходить из директории в директорию образа и устанавливает, в какой директории будут выполняться команды, описанные в Dockerfile, — это сходно с выполнением команды cd в терминале.
Инструкций WORKDIR внутри Dockerfile может быть несколько — можно последовательно переходить по директориям и выполнять в них необходимые операции.

WORKDIR <путь-к-директории-внутри-контейнера>
# Тут можно совершить какие-то действия в директории — 
# например, выполнить команду в терминале:
RUN mkdir new_folder
# Потом можно перейти в другую директорию:
WORKDIR <путь-к-другой-директории-внутри-контейнера>
# ...и выполнить какие-то действия в ней. 

Если директории, указанной в инструкции WORKDIR, не существует, эта директория будет создана.
В WORKDIR можно указывать относительный путь, он будет начинаться с текущей директории:

# Это абсолютный путь, он начинается со слеша 
# и отсчитывается от корневой директории:
WORKDIR /workdir 
# Это относительный путь — он без слеша в начале и отсчитывается от той директории,
# в которой мы сейчас:
WORKDIR project
WORKDIR app
RUN pwd 
# Команда pwd выведет адрес /workdir/project/app 
В инструкции WORKDIR лучше указывать абсолютный путь до директории — иначе можно случайно назначить рабочей директорией неизвестную подпапку:

WORKDIR /workdir
WORKDIR /project
WORKDIR /app
RUN pwd
# Выведет адрес директории /app в корне контейнера. 


Если директории, указанной в инструкции WORKDIR, не существует, эта директория будет создана.
В WORKDIR можно указывать относительный путь, он будет начинаться с текущей директории:

# Это абсолютный путь, он начинается со слеша 
# и отсчитывается от корневой директории:
WORKDIR /workdir 
# Это относительный путь — он без слеша в начале и отсчитывается от той директории,
# в которой мы сейчас:
WORKDIR project
WORKDIR app
RUN pwd 
# Команда pwd выведет адрес /workdir/project/app 
В инструкции WORKDIR лучше указывать абсолютный путь до директории — иначе можно случайно назначить рабочей директорией неизвестную подпапку:

WORKDIR /workdir
WORKDIR /project
WORKDIR /app
RUN pwd
# Выведет адрес директории /app в корне контейнера. 

Если целевой директории для копирования не существует — инструкция COPY создаст её.

# Скопировать всё содержимое директории, где хранится Dockerfile,
# в директорию /nonexistent образа.
COPY . /nonexistent
# Если в образе не было директории /nonexistent, она будет создана.

Файл .dockerignore
Некоторые файлы и директории не должны попасть в образ: они там не нужны, при копировании надо исключить их. Такие исключения можно перечислить в файле .dockerignore; он должен располагаться в той же директории, что и Dockerfile. Принцип работы файла .dockerignore такой же, как у .gitignore.
В качестве примера можно привести файлы виртуального окружения и файлы Git-репозитория. Их много, из-за них замедляется сборка образа — но эти файлы никак не используются в образе, это просто балласт, который увеличит вес образа. Так что с чистой совестью добавляем директории venv и .git в .dockerignore:

# Файл .dockerignore
venv
.git
db.sqlite3 


Инструкция RUN
Эта инструкция выполняет команды терминала внутри образа так, как если бы эти команды выполнял разработчик. 

RUN <команда> 
Инструкцией RUN можно вызвать утилиту, можно создать директорию через mkdir — можно выполнить любую команду, которую обычно вызывают через терминал. Чтобы инструкция сработала, к моменту выполнения команды образ уже должен содержать вызываемую утилиту.
В докерфайле для Taski инструкция RUN запускает внутри образа команду для установки зависимостей:

# Если не использовать параметр --no-cache-dir, 
# то pip сохранит в служебной директории (прямо в образе) копии пакетов,
# а это будет лишним грузом.
RUN pip install -r /app/requirements.txt --no-cache-dir

Инструкция CMD
Мало запустить контейнер — нужно запустить и приложение внутри контейнера. 
Инструкция CMD указывает, какую команду нужно выполнить при запуске контейнера, — в отличие от инструкции RUN, которая выполнит команду при сборке образа.
У инструкции CMD есть три особенности:
в Dockerfile срабатывает только одна инструкция CMD. Если этих инструкций несколько, выполнится только та, что записана последней;
параметры инструкции CMD указываются в виде JSON-массива, элементы массива заключаются в двойные кавычки;
первым элементом указывается исполняемый файл, например, интерпретатор Python; следом указываются параметры для запуска исполняемого файла:

CMD ["исполняемый_файл", "аргумент_1", ..., "аргумент_2"] 
Инструкция CMD в вашем Dockerfile запустит веб-сервер разработки Django-приложения внутри контейнера:

CMD ["python", "manage.py", "runserver", "0:8000"] 